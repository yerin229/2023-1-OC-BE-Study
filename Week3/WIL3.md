# 기초 백엔드 스터디 3주차

복습: No
부제: JPA, Spring Bean
작성일시: 2023년 4월 9일 오후 10:47

### 의존과 의존성

A가 B를 의존한다 = B의 기능이 추가/변경되거나 형식이 바뀌면 그 영향이 A에 미친다.

ex) 멤버 컨트롤러가 멤버 서비스를 통해 회원가입/데이터 조회 가능한 것을 “컨트롤러가 서비스를 의존한다”라고 표현

### @Autowired 의존성 주입

1. Constructor 주입
    
    클래스의 생성자가 하나이고, 그 생성자로 주입받을 객체가 빈으로 등록되어 있다면 @Autowired를 생략할 수 있다.
    
2. Field 주입
    
    필드에 @Autowired 어노테이션만 붙여주면 자동으로 의존성 주입된다. 
    
    -장점: 사용법 간단
    
    -단점: 외부에서 변경하기 힘듦/프레임워크에 의존적이고 객체지향적으로 좋지 않음
    
3. Setter 주입
    
    Setter 메소드에 @Autowired 어노테이션을 붙이는 방법
    
    -단점: setXXX 메서드를 public으로 열어두어야 하기 때문에 언제 어디서든 변경 가능
    

⇒ Setter 주입 권장

- 순환 참조 방지 (의존 관계에 내용 외부로 노출 → 어플리케이션 실행하는 시점에서 오류 체크 가능)
- 불변성 (Setter로 의존성 주입할 때 final로 선언 가능 → 런타임에서 의존성 주입받는 객체 변할 일 없음)
- 테스트에 용이 (테스트 코드 좀 더 편리하게 작성 가능)

### DIP

: 하위 계층(저수준 모듈)이 상위 계층(고수준 모듈)에 의존

- **표현 계층** : 사용자의 요청을 받아 응용 영역에 전달함과 동시에 처리 결과를 사용자에게 표시
- **응용 영역** : 사용자에게 제공해야 할 기능 구현
- **도메인 영역** : 도메인의 핵심 로직 & 도메인 모델 구현
- **인프라 계층** : 구현 기술을 다룸 (ex. DB 연동)

**How?** 추상타입(인터페이스, 추상 클래스 등) 사용

### 스프링 빈과 스프링 컨테이너란?

- 스프링 빈:
    - 보통 스프링 컨테이너에 빈 인스턴스 한개만 저장 (싱글톤 방식)
    - 스프링 빈 등록 방법
        - 컴포넌트 스캔: @component 어노테이션 통해 가능 (@Controller, @Service, @Repository 등의 어노테이션도 가능
        - 스프링 빈 직접 등록: @Comfiguration, @Bean 어노테이션 통해 가능
- 스프링 컨테이너:
    - 스프링에서 자바 객체(빈)들을 관리하는 공간
    - 빈의 생성부터 소멸까지 개발자 대신 관리
    - 종류
        - BeanFactory
        - ApplicationContext: BeanFactory의 기능 + 추가적인 기능

### JDBC와 JPA?

- JDBC
    
    : DB에 접근할 수 있도록 Java에서 제공하는 API
    
    - JDBC DriverManager가 DB제품에 따른 드라이버를 생성해 JDBC API에 맞게 동작할 수 있게 처리
        
        ⇒ JDBC API 변경 없이 JDBC Driver만 바꿔주면 어떤 제품의 DB든 연결 가능
        
- JPA
    
    : 직접적인 SQL문을 사용하지 않고 Java 코드를 사용해 DB에 접근/조작할 수 있는 기술 (내부적으로 JDBC 사용)
    
    - 장점
        - SQL문을 직접 Java 앱 내에서 적는 경우 적어짐
            - 기본적인 CRUD 쿼리 반복적으로 작성하지 않아도 됨
            - 수정사항 발생했을 때 수정해야 할 코드 적음
        - SQL 구조를 Java  앱 내에서 적용하지 않아도됨
    - 단점
        - 메서드 호출로 쿼리 실행은 직접 SQL을 호출하는 것보다 성능 떨어짐
        - 복잡한 통계 분석 쿼리를 메서드 호출로 처리하는 것은 어려움
            - 로직이 복잡하거나 불필요한 쿼리 발생 가능
        - 러닝 커브 높음